(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{3335:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-page",{class:t.$q.dark.isActive?"":"bg-grey-2"},[e("div",{staticClass:"row flex flex-center q-pa-md"},[e("div",{staticClass:"col-12 col-sm-8 col-md-6 col-lg-4"},[e("videoCard",{attrs:{files:t.files,"show-sticky":t.showSticky},on:{"update:showSticky":function(i){t.showSticky=i},"update:show-sticky":function(i){t.showSticky=i}}}),t.showSticky?t._e():e("q-btn",{staticClass:"full-width q-mt-md",attrs:{label:t.$t("actionVideo.chooseFile"),rounded:"",ripple:"",color:"primary"}},[e("fileInput",{model:{value:t.files,callback:function(i){t.files=i},expression:"files"}})],1)],1)]),e("q-page-scroller",{attrs:{position:"bottom-right","scroll-offset":t.scrollOffset,offset:t.offset}},[e("q-btn",{attrs:{round:"",ripple:"",icon:"keyboard_arrow_up",color:"primary"}})],1),t.showSticky?e("q-page-sticky",{attrs:{position:"bottom",offset:t.fileOffset}},[e("q-btn",{attrs:{round:"",ripple:"",size:"lg",icon:"add",color:"primary"}},[e("fileInput",{model:{value:t.files,callback:function(i){t.files=i},expression:"files"}})],1)],1):t._e()],1)},o=[],a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[0===t.fileList.length?e("q-card",{staticClass:"my-card no-shadow q-mb-md q-pt-md q-pl-md q-pr-md"},[e("q-skeleton",{attrs:{height:"180px",square:""}}),e("q-card-section",[e("q-skeleton",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{type:"circle",size:"60px"}}),e("q-skeleton",{staticClass:"q-pt-md",attrs:{type:"rect"}})],1)],1):t._e(),t._l(t.fileList,(function(i,n){return e("q-card",{key:i.name,staticClass:"my-card no-shadow q-mb-md q-pl-md q-pr-md"},[e("q-video",{staticClass:"q-pt-md",attrs:{src:i.src}}),e("q-card-section",[e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"80px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,round:"",ripple:"",color:"negative",icon:"delete"},on:{click:function(e){return t.delVideo(i,n)}},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-spinner-facebook")]},proxy:!0}],null,!0)},[e("q-tooltip",{attrs:{"content-class":"bg-negative"}},[t._v("\n          "+t._s(t.$t("actionVideo.delVideo"))+"\n        ")])],1),e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,round:"",ripple:"",color:"primary",icon:"audiotrack"},on:{click:function(e){return t.videoToAudio(i)}},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-spinner-facebook")]},proxy:!0}],null,!0)},[e("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("\n          "+t._s(t.$t("actionVideo.videoToAudio"))+"\n        ")])],1),e("div",{staticClass:"row no-wrap items-center"},[e("div",{staticClass:"col text-h6 ellipsis"},[t._v("\n          "+t._s(i.name)+"\n        ")])]),e("div",{staticClass:"text-subtitle2"},[t._v("\n        "+t._s(i.duration||"00:00:00")+"\n      ")])],1),i.audioSrc?[e("q-video",{attrs:{src:i.audioSrc}}),e("q-card-section",[e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,round:"",ripple:"",color:"secondary",icon:"file_download"},on:{click:function(e){return t.downloadAudio(i)}},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-spinner-facebook")]},proxy:!0}],null,!0)},[e("q-tooltip",{attrs:{"content-class":"bg-secondary"}},[t._v("\n            "+t._s(t.$t("actionVideo.downloadAudio"))+"\n          ")])],1),e("div",{staticClass:"row no-wrap items-center"},[e("div",{staticClass:"col text-h6 ellipsis"},[t._v("\n            "+t._s(i.audioName)+"\n          ")])]),e("div",{staticClass:"text-subtitle2"},[t._v("\n          "+t._s(i.duration||"00:00:00")+"\n        ")])],1)]:t._e()],2)}))],2)},s=[],l=(e("e260"),e("d81d"),e("a434"),e("b0c0"),e("b64b"),e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("96cf"),e("c973")),c=e.n(l),r=e("6374"),d=e.n(r),u={name:"VideoCard",props:{files:{type:[FileList,Object],default:function(){}},showSticky:{type:[Boolean],default:function(){return!1}}},data:function(){return{loading:!1,fileList:[]}},watch:{files:function(t,i){t&&t!==i&&this.initFileList(t)},fileList:function(t,i){t&&t.length>1?this.$emit("update:showSticky",!0):this.$emit("update:showSticky",!1)}},mounted:function(){var t=this;this.$indexDB.initDB(this.$myDB,(function(){t.$indexDB.getDataByKey("fileList",(function(i,e){if(e&&e.data){var n,o=d()(e.data);try{for(o.s();!(n=o.n()).done;){var a=n.value;t.initFileItem(a)}}catch(s){o.e(s)}finally{o.f()}t.initFileData()}}))}))},destroyed:function(){this.$indexDB.closeDB()},methods:{initFileList:function(){var t=arguments,i=this;return c()(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:i.files,e.prev=1,i.loading=!0,e.next=5,Object.keys(n).map((function(t){var e=n[t];i.initFileItem(e)}));case 5:i.initFileData(),i.cacheFileList(),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:return e.prev=11,i.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,9,11,14]])})))()},initFileItem:function(t){this.fileList.push({file:t,name:t.name,src:URL.createObjectURL(t),data:null,duration:"",audioName:t.name+".wav",audioBlob:null,audioSrc:null})},initFileData:function(){var t=this;this.fileList.map((function(i){i.data||t.$videoTool.decodedData(i.file).then((function(e){i.data=e,i.duration=t.$videoTool.durationTrans(e.duration||0)}))}))},delVideo:function(t,i){var e=this;this.$q.dialog({title:"".concat(this.$t("confirmTitle")),message:"".concat(this.$t("actionVideo.delVideoConfirm")),ok:"".concat(this.$t("confirmOk")),cancel:"".concat(this.$t("confirmCancel")),persistent:!0}).onOk((function(){e.loading=!0,e.fileList.splice(i,1),e.cacheFileList(),e.loading=!1})).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))},videoToAudio:function(t){var i=this;this.loading=!0,t.data?this.$videoTool.dataToAudio(t.data,t.name).then((function(e){i.updateFileData(e,t)})):this.$videoTool.videoToAudio(t.file).then((function(e){i.updateFileData(e,t)})),this.loading=!1},updateFileData:function(t,i){t?(i.audioBlob=t.blob,i.audioSrc=URL.createObjectURL(t.blob),i.duration=t.duration,this.$q.notify({color:"green-4",textColor:"white",icon:"done",message:"".concat(this.$t("actionVideo.success"))})):this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"".concat(this.$t("actionVideo.failed"))})},downloadAudio:function(t){this.loading=!0,this.$videoTool.downloadWav(t.audioBlob,t.name),this.loading=!1},cacheFileList:function(){var t=[];this.fileList.map((function(i){t.push(i.file)})),this.$indexDB.putData({id:"fileList",data:t})}}},f=u,p=e("2877"),h=e("f09f"),m=e("293e"),b=e("a370"),v=e("6ac0"),g=e("9c40"),y=e("e669"),k=e("05c0"),w=e("eebe"),q=e.n(w),_=Object(p["a"])(f,a,s,!1,null,"0d3219f6",null),$=_.exports;q()(_,"components",{QCard:h["a"],QSkeleton:m["a"],QCardSection:b["a"],QVideo:v["a"],QBtn:g["a"],QSpinnerFacebook:y["a"],QTooltip:k["a"]});var x=e("b1b6"),C={name:"VideoToAudio",components:{videoCard:$,fileInput:x["a"]},data:function(){return{offset:[18,18],scrollOffset:150,showSticky:!1,fileOffset:[0,18],files:null}},watch:{files:function(t,i){},showSticky:function(t,i){}},created:function(){},beforeDestroy:function(){}},S=C,L=e("9989"),D=e("5096"),F=e("de5e"),B=Object(p["a"])(S,n,o,!1,null,null,null);i["default"]=B.exports;q()(B,"components",{QPage:L["a"],QBtn:g["a"],QPageScroller:D["a"],QPageSticky:F["a"]})},"952e":function(t,i,e){"use strict";e("c16c")},b1b6:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("q-input",{staticClass:"my-input-file",attrs:{accept:t.accept,multiple:"",filled:"",type:"file",hint:"Native file (multiple)"},on:{input:function(i){t.files=i}}})],1)},o=[],a={name:"FileInput",props:{accept:{type:[String],default:function(){return"video/*,audio/*"}}},data:function(){return{files:null}},watch:{files:function(t,i){t&&t!==i&&this.$emit("input",t)}},created:function(){},destroyed:function(){}},s=a,l=(e("952e"),e("2877")),c=e("27f9"),r=e("eebe"),d=e.n(r),u=Object(l["a"])(s,n,o,!1,null,"1387f200",null);i["a"]=u.exports;d()(u,"components",{QInput:c["a"]})},c16c:function(t,i,e){}}]);