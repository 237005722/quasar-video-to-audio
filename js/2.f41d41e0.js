(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"1cc0":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{class:t.$q.dark.isActive?"":"bg-grey-2"},[i("div",{staticClass:"row flex flex-center q-pa-md"},[i("div",{staticClass:"col-12 col-sm-8 col-md-6 col-lg-4"},[i("imagesCard",{attrs:{files:t.files,"show-sticky":t.showSticky,"show-choose":t.showChoose},on:{"update:showSticky":function(e){t.showSticky=e},"update:show-sticky":function(e){t.showSticky=e},"update:showChoose":function(e){t.showChoose=e},"update:show-choose":function(e){t.showChoose=e}}}),t.showChoose&&!t.showSticky?i("q-btn",{staticClass:"full-width q-mt-md",attrs:{label:t.$t("actionImages.chooseFile"),rounded:"",ripple:"",color:"primary"}},[i("fileInput",{attrs:{accept:t.accept},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1):t._e()],1)]),i("q-page-scroller",{attrs:{position:"bottom-right","scroll-offset":t.scrollOffset,offset:t.offset}},[i("q-btn",{attrs:{round:"",ripple:"",icon:"keyboard_arrow_up",color:"primary"}})],1),t.showChoose&&t.showSticky?i("q-page-sticky",{attrs:{position:"bottom",offset:t.fileOffset}},[i("q-btn",{attrs:{round:"",ripple:"",size:"lg",icon:"add",color:"primary"}},[i("fileInput",{attrs:{accept:t.accept},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1)],1):t._e()],1)},o=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[0===t.fileList.length?i("q-card",{staticClass:"my-card no-shadow q-mb-md q-pt-md q-pl-md q-pr-md q-pb-md"},[i("div",{staticClass:"row q-col-gutter-md"},t._l(5,(function(t){return i("div",{key:"md-"+t,staticClass:"col-4"},[i("q-skeleton",{attrs:{type:"QBtn",width:"100%",height:"100px"}})],1)})),0)]):t._e(),t.fileList.length>0&&0===t.step?i("q-card",{staticClass:"my-card no-shadow q-mb-md q-pt-md q-pl-md q-pr-md"},[i("div",{staticClass:"row q-col-gutter-md"},t._l(t.fileList,(function(e,n){return i("div",{key:e.name+"_"+n,staticClass:"col-4"},[i("q-img",{staticClass:"rounded-borders",staticStyle:{width:"100%"},attrs:{src:e.src,ratio:1,basic:"","spinner-color":"white"}},[i("div",{staticClass:"absolute-bottom text-center text-body2"},[t._v("\n            "+t._s(e.name)+"\n          ")])])],1)})),0),i("q-card-section",[i("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,round:"",ripple:"",color:"primary",icon:"arrow_forward"},on:{click:function(e){return t.nextAction()}},scopedSlots:t._u([{key:"loading",fn:function(){return[i("q-spinner-facebook")]},proxy:!0}],null,!1,4102112682)},[i("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("\n          "+t._s(t.$t("actionImages.imagesToVideo"))+"\n        ")])],1)],1)],1):i("q-card",{staticClass:"my-card no-shadow q-mb-md q-pl-md q-pr-md",attrs:{id:"canvasParent"}},[i("canvas",{staticClass:"q-mt-md myCanvas",attrs:{id:"myCanvas",width:t.canvas.width,height:t.canvas.height}}),i("q-card-section",[i("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"80px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,round:"",ripple:"",color:"info",icon:"arrow_back"},on:{click:function(e){return t.prevAction()}},scopedSlots:t._u([{key:"loading",fn:function(){return[i("q-spinner-facebook")]},proxy:!0}])},[i("q-tooltip",{attrs:{"content-class":"bg-info"}},[t._v("\n          "+t._s(t.$t("actionImages.chooseFile"))+"\n        ")])],1),i("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,round:"",ripple:"",color:"primary",icon:"videocam"},on:{click:function(e){return t.startRecord()}},scopedSlots:t._u([{key:"loading",fn:function(){return[i("q-spinner-facebook")]},proxy:!0}])},[i("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("\n          "+t._s(t.$t("actionImages.startImagesToVideo"))+"\n        ")])],1),i("div",{staticClass:"row no-wrap items-center"},[i("div",{staticClass:"col text-h6 ellipsis"},[t._v("\n          "+t._s(t.$t("actionImages.fileTotal"))+" "+t._s(t.fileList.length)+"\n        ")])])],1),t.video.src?[i("q-video",{staticClass:"q-pt-md",attrs:{src:t.video.src}}),i("q-card-section",[i("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,round:"",ripple:"",color:"primary",icon:"file_download"},on:{click:function(e){return t.downloadVideo()}},scopedSlots:t._u([{key:"loading",fn:function(){return[i("q-spinner-facebook")]},proxy:!0}],null,!1,4102112682)},[i("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("\n            "+t._s(t.$t("actionImages.downloadVideo"))+"\n          ")])],1),i("div",{staticClass:"row no-wrap items-center"},[i("div",{staticClass:"col text-h6 ellipsis"},[t._v("\n            "+t._s(t.video.name)+"\n          ")])])],1)]:t._e()],2)],1)},s=[],c=(i("e260"),i("d81d"),i("b0c0"),i("b64b"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("96cf"),i("c973")),r=i.n(c),l=i("6374"),d=i.n(l),u={name:"ImagesCard",props:{files:{type:[FileList,Object],default:function(){}},showChoose:{type:[Boolean],default:function(){return!1}},showSticky:{type:[Boolean],default:function(){return!1}}},data:function(){return{loading:!1,fileList:[],canvas:{width:336,height:168},video:{name:"",blob:"",src:""},intance:null,step:0}},watch:{files:function(t,e){t&&t!==e&&this.initFileList(t)},fileList:function(t,e){t&&t.length>9?this.$emit("update:showSticky",!0):this.$emit("update:showSticky",!1)},step:function(t,e){var i=this;this.$emit("update:showChoose",0===t),1===t&&this.$nextTick((function(){i.initCanvas()}))}},mounted:function(){var t=this;this.$indexDB.initDB(this.$myDB,(function(){t.$indexDB.getDataByKey("imagesFileList",(function(e,i){if(i&&i.data){var n,o=d()(i.data);try{for(o.s();!(n=o.n()).done;){var a=n.value;t.initFileItem(a)}}catch(s){o.e(s)}finally{o.f()}}}))}))},destroyed:function(){this.$indexDB.closeDB()},methods:{initCanvas:function(){var t=document.getElementById("canvasParent");this.canvas.width=t.clientWidth-32,this.canvas.height=this.canvas.width/2},initFileList:function(){var t=arguments,e=this;return r()(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:e.files,i.prev=1,e.loading=!0,i.next=5,Object.keys(n).map((function(t){var i=n[t];e.initFileItem(i)}));case 5:e.cacheFileList(),i.next=10;break;case 8:i.prev=8,i.t0=i["catch"](1);case 10:return i.prev=10,e.loading=!1,i.finish(10);case 13:case"end":return i.stop()}}),i,null,[[1,8,10,13]])})))()},initFileItem:function(t){this.fileList.push({file:t,name:t.name,src:URL.createObjectURL(t)})},nextAction:function(){this.step=1},prevAction:function(){this.step=0},startRecord:function(){var t=this;return r()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.loading=!0,0!==t.fileList.length){e.next=5;break}return t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"".concat(t.$t("actionImages.noFileError"))}),e.abrupt("return");case 5:return e.next=7,t.$imagesTovideo.startRecord(document.getElementById("myCanvas"),t.fileList);case 7:t.video=e.sent,t.video?t.$q.notify({color:"green-4",textColor:"white",icon:"done",message:"".concat(t.$t("actionImages.success"))}):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"".concat(t.$t("actionImages.failed"))}),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,11,13,16]])})))()},downloadVideo:function(){this.loading=!0,this.video&&this.$imagesTovideo.downloadVideo({name:this.video.name,blob:this.video.blob}),this.loading=!1},cacheFileList:function(){var t=[];this.fileList.map((function(e){t.push(e.file)})),this.$indexDB.putData({id:"imagesFileList",data:t})}}},f=u,p=(i("dd7a"),i("2877")),h=i("f09f"),m=i("293e"),g=i("068f"),v=i("a370"),b=i("9c40"),w=i("e669"),y=i("05c0"),q=i("6ac0"),k=i("eebe"),C=i.n(k),x=Object(p["a"])(f,a,s,!1,null,"e7ccd6ca",null),_=x.exports;C()(x,"components",{QCard:h["a"],QSkeleton:m["a"],QImg:g["a"],QCardSection:v["a"],QBtn:b["a"],QSpinnerFacebook:w["a"],QTooltip:y["a"],QVideo:q["a"]});var $=i("b1b6"),S={name:"ImagesToVideo",components:{imagesCard:_,fileInput:$["a"]},data:function(){return{offset:[18,18],scrollOffset:150,showChoose:!0,showSticky:!1,fileOffset:[0,18],accept:"image/*",files:null}},watch:{files:function(t,e){},showSticky:function(t,e){}},created:function(){},beforeDestroy:function(){}},I=S,L=i("9989"),B=i("5096"),F=i("de5e"),Q=Object(p["a"])(I,n,o,!1,null,null,null);e["default"]=Q.exports;C()(Q,"components",{QPage:L["a"],QBtn:b["a"],QPageScroller:B["a"],QPageSticky:F["a"]})},"952e":function(t,e,i){"use strict";i("c16c")},b1b6:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-input",{staticClass:"my-input-file",attrs:{accept:t.accept,multiple:"",filled:"",type:"file",hint:"Native file (multiple)"},on:{input:function(e){t.files=e}}})],1)},o=[],a={name:"FileInput",props:{accept:{type:[String],default:function(){return"video/*,audio/*"}}},data:function(){return{files:null}},watch:{files:function(t,e){t&&t!==e&&this.$emit("input",t)}},created:function(){},destroyed:function(){}},s=a,c=(i("952e"),i("2877")),r=i("27f9"),l=i("eebe"),d=i.n(l),u=Object(c["a"])(s,n,o,!1,null,"1387f200",null);e["a"]=u.exports;d()(u,"components",{QInput:r["a"]})},b6be:function(t,e,i){},c16c:function(t,e,i){},dd7a:function(t,e,i){"use strict";i("b6be")}}]);