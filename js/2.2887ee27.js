(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"06a0":function(t,i,e){"use strict";e("7552")},2704:function(t,i,e){"use strict";e("3372")},3372:function(t,i,e){},7552:function(t,i,e){},"8b24":function(t,i,e){"use strict";e.r(i);var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-page",{class:t.$q.dark.isActive?"":"bg-grey-2"},[e("div",{staticClass:"row flex flex-center q-pa-md"},[e("div",{staticClass:"col-12 col-sm-8 col-md-6 col-lg-4"},[e("videoCard",{attrs:{files:t.files,showSticky:t.showSticky},on:{"update:showSticky":function(i){t.showSticky=i},"update:show-sticky":function(i){t.showSticky=i}}}),t.showSticky?t._e():e("q-btn",{staticClass:"full-width q-mt-md",attrs:{rounded:"",color:"primary",label:t.$t("action.chooseFile")}},[e("fileInput",{model:{value:t.files,callback:function(i){t.files=i},expression:"files"}})],1)],1)]),t.showSticky?e("q-page-sticky",{attrs:{position:"bottom",offset:t.fileOffset}},[e("q-btn",{attrs:{push:"",round:"",ripple:"",size:"lg",icon:"add",color:"primary"}},[e("fileInput",{model:{value:t.files,callback:function(i){t.files=i},expression:"files"}})],1)],1):t._e(),e("q-page-scroller",{attrs:{position:"bottom-right","scroll-offset":t.scrollOffset,offset:t.offset}},[e("q-btn",{attrs:{push:"",round:"",ripple:"",icon:"keyboard_arrow_up",color:"orange"}})],1)],1)},n=[],a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[0===t.fileList.length?e("q-card",{staticClass:"my-card no-shadow q-mb-md q-pt-md q-pl-md q-pr-md"},[e("q-skeleton",{attrs:{height:"180px",square:""}}),e("q-card-section",[e("q-skeleton",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{type:"circle",size:"60px"}}),e("q-skeleton",{staticClass:"q-pt-md",attrs:{type:"rect"}})],1)],1):t._e(),t._l(t.fileList,(function(i,o){return e("q-card",{key:i.name,staticClass:"my-card no-shadow q-mb-md q-pl-md q-pr-md"},[e("q-video",{staticClass:"q-pt-md",attrs:{src:i.src}}),e("q-card-section",[e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"80px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,push:"",round:"",ripple:"",color:"negative",icon:"delete"},on:{click:function(e){return t.delVideo(i,o)}},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-spinner-facebook")]},proxy:!0}],null,!0)},[e("q-tooltip",{attrs:{"content-class":"bg-negative"}},[t._v(t._s(t.$t("action.delVideo")))])],1),e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,push:"",round:"",ripple:"",color:"primary",icon:"audiotrack"},on:{click:function(e){return t.videoToAudio(i)}},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-spinner-facebook")]},proxy:!0}],null,!0)},[e("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v(t._s(t.$t("action.videoToAudio")))])],1),e("div",{staticClass:"row no-wrap items-center"},[e("div",{staticClass:"col text-h6 ellipsis"},[t._v(" "+t._s(i.name)+" ")])]),e("div",{staticClass:"text-subtitle2"},[t._v("\n        "+t._s(i.duration||"00:00:00")+"\n      ")])],1),i.audioSrc?[e("q-video",{attrs:{src:i.audioSrc}}),e("q-card-section",[e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{disable:t.loading,loading:t.loading,push:"",round:"",ripple:"",color:"secondary",icon:"file_download"},on:{click:function(e){return t.downloadAudio(i)}},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-spinner-facebook")]},proxy:!0}],null,!0)},[e("q-tooltip",{attrs:{"content-class":"bg-secondary"}},[t._v(t._s(t.$t("action.downloadAudio")))])],1),e("div",{staticClass:"row no-wrap items-center"},[e("div",{staticClass:"col text-h6 ellipsis"},[t._v(" "+t._s(i.audioName)+" ")])]),e("div",{staticClass:"text-subtitle2"},[t._v("\n        "+t._s(i.duration||"00:00:00")+"\n      ")])],1)]:t._e()],2)}))],2)},s=[],l=(e("e260"),e("d81d"),e("a434"),e("b0c0"),e("b64b"),e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("96cf"),e("c973")),c=e.n(l),r=e("6374"),d=e.n(r),u={name:"VideoCard",props:{files:{type:[FileList,Object],default:function(){}},showSticky:{type:[Boolean],default:function(){return!1}}},data:function(){return{loading:!1,fileList:[]}},watch:{files:function(t,i){console.log("VideoCard watch files",t),t&&t!==i&&this.initFileList(t)},fileList:function(t,i){console.log("VideoCard watch fileList",t),t&&t.length>1?this.$emit("update:showSticky",!0):this.$emit("update:showSticky",!1)}},created:function(){var t=this;console.log("created"),this.$indexDB.initDB(this.$myDB,(function(){t.$indexDB.getDataByKey("fileList",(function(i,e){if(e&&e.data){var o,n=d()(e.data);try{for(n.s();!(o=n.n()).done;){var a=o.value;t.initFileItem(a)}}catch(s){n.e(s)}finally{n.f()}t.initFileData()}}))}))},destroyed:function(){console.log("destroyed"),this.$indexDB.closeDB()},methods:{initFileList:function(){var t=arguments,i=this;return c()(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.length>0&&void 0!==t[0]?t[0]:i.files,i.loading=!0,e.next=4,Object.keys(o).map((function(t){var e=o[t];i.initFileItem(e)}));case 4:i.initFileData(),console.log("initFileList cacheFileList"),i.cacheFileList(),i.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},initFileItem:function(t){this.fileList.push({file:t,name:t.name,src:URL.createObjectURL(t),data:null,duration:"",audioName:t.name+".wav",audioBlob:null,audioSrc:null})},initFileData:function(){var t=this;this.fileList.map((function(i){i.data||t.$videoTool.decodedData(i.file).then((function(e){i.data=e,i.duration=t.$videoTool.durationTrans(e.duration||0)}))}))},delVideo:function(t,i){var e=this;this.$q.dialog({title:"".concat(this.$t("confirmTitle")),message:"".concat(this.$t("action.delVideoConfirm")),ok:"".concat(this.$t("confirmOk")),cancel:"".concat(this.$t("confirmCancel")),persistent:!0}).onOk((function(){e.loading=!0,e.fileList.splice(i,1),console.log("delVideo cacheFileList"),e.cacheFileList(),e.loading=!1})).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))},videoToAudio:function(t){var i=this;this.loading=!0,t.data?this.$videoTool.dataToAudio(t.data,t.name).then((function(e){console.log("audio",e),i.updateFileData(e,t)})):this.$videoTool.videoToAudio(t.file).then((function(e){console.log("audio",e),i.updateFileData(e,t)})),this.loading=!1},updateFileData:function(t,i){t?(i.audioBlob=t.blob,i.audioSrc=URL.createObjectURL(t.blob),i.duration=t.duration,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"".concat(this.$t("success"))})):this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"".concat(this.$t("failed"))})},downloadAudio:function(t){this.loading=!0,this.$videoTool.downloadWav(t.audioBlob,t.name),this.loading=!1},cacheFileList:function(){var t=[];this.fileList.map((function(i){t.push(i.file)})),console.log("cacheFileList modData",t),this.$indexDB.putData({id:"fileList",data:t})}}},f=u,p=(e("2704"),e("2877")),h=e("f09f"),m=e("293e"),g=e("a370"),v=e("6ac0"),b=e("9c40"),y=e("e669"),w=e("05c0"),k=e("eebe"),q=e.n(k),_=Object(p["a"])(f,a,s,!1,null,"563a9378",null),x=_.exports;q()(_,"components",{QCard:h["a"],QSkeleton:m["a"],QCardSection:g["a"],QVideo:v["a"],QBtn:b["a"],QSpinnerFacebook:y["a"],QTooltip:w["a"]});var C=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("q-input",{staticClass:"my-input-file",attrs:{multiple:"",filled:"",type:"file",accept:"video/*,audio/*",hint:"Native file (multiple)"},on:{input:function(i){t.files=i}}})],1)},S=[],$={name:"FileInput",data:function(){return{files:null}},watch:{files:function(t,i){t&&t!==i&&this.$emit("input",t)}},created:function(){},destroyed:function(){}},L=$,F=(e("06a0"),e("27f9")),D=Object(p["a"])(L,C,S,!1,null,"3ca2ec7a",null),B=D.exports;q()(D,"components",{QInput:F["a"]});var O={name:"PageIndex",components:{videoCard:x,fileInput:B},data:function(){return{showSticky:!1,fileOffset:[0,18],offset:[18,18],scrollOffset:150,videoSrc:"https://237005722.github.io/video-to-audio/peerless-master.mp4",files:null}},watch:{files:function(t,i){console.log("PageIndex watch files",t)},showSticky:function(t,i){console.log("PageIndex watch showSticky",t)}},created:function(){},beforeDestroy:function(){}},T=O,Q=e("9989"),I=e("de5e"),A=e("5096"),V=Object(p["a"])(T,o,n,!1,null,null,null);i["default"]=V.exports;q()(V,"components",{QPage:Q["a"],QBtn:b["a"],QPageSticky:I["a"],QPageScroller:A["a"]})}}]);